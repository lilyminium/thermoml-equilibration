# Analysing equilibration curves

This directory contains scripts to analyze equilibration data.

The output of this is the manually assembled `output/exclude-molecules.smi` file of components I considered to be slow at equilibrating.

Note: One run of BrCCBr in the sage-2-0-0_1 directory died very shortly into running the box so it looks odd. It was not considered as slowly equilibrating as it is an anomalous outlier.

TODO: the erroneously-named sage-2-0-0 directory was actually run with sage-2.1.0, but all the script paths currently refer to it as sage-2-0-0 so I have kept it as such for now.

## Scripts

Below are quick descriptions of each script in the rough order used to run them. Log files are in `logs`

* process-equilibration-index.py: this parses the OpenMM statistics file generated by each equilibration run, as well as the equilibration index, into a CSV. Yields `output*/equilibration_data.csv` and `output*/equilibrated_fraction.[csv|json]`, although the former has not been included on GitHub for size reasons.
* highlight-bad-components.py: Highlights **components** where the equilibration point is *any property* more than 70% into the run. This pulls in a lot of false positives in mixtures that are slow, but only due to one component. Plots images starting with `problematic_molecules*.png`. 
* highlight-bad-components-by-smiles.py: a variation of the above, but instead of using the equilibration point to plot molecules, uses a list of suspicious-looking molecules I put together manually in `include-molecules.smi`. I used this script to check molecules that *didn't* raise flags in the previous step.
* compare-distributions.py: a quick and dirty way to compare distributions of properties of the same simulation box between runs. This was used to double check things weren't significantly different between replicates. Note that one run of BrCCBr in the sage-2-0-0 run died very shortly into running it for unrelated reasons and therefore that distribution looks very odd.